function t_video_lazyload_init(){if("IntersectionObserver"in window){var e,t=300;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(t=150);var o=document.querySelectorAll(".t-video-lazyload:not(.t-video-no-lazyload)"),i=new IntersectionObserver((function(e,t){e.forEach((function(e){if(e.isIntersecting){var o=e.target;t.unobserve(o),t_video_lazyload__addVideo(o)}}))}),{rootMargin:t+"px 0px"});Array.prototype.forEach.call(o,(function(e){i.observe(e)}))}else t_video_lazyload__addVideoWithCheckViewport(),window.addEventListener("scroll",t_throttle((function(){t_video_lazyload__addVideoWithCheckViewport()}),300))}function t_video_lazyload__addVideoWithCheckViewport(){var e=document.documentElement.clientHeight,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),o=700,i;t&&(o=350),i=document.documentMode<9?Array.prototype.slice.call(document.querySelectorAll(".t-video-lazyload:not(.t-video-no-lazyload)")).filter((function(e){var t=e.closest(".r");return!t.classList.contains("t395__off")&&!t.classList.contains("t397__off")&&!t.classList.contains("t400__off")})):document.querySelectorAll(".r:not(.t395__off):not(.t397__off):not(.t400__off) .t-video-lazyload:not(.t-video-no-lazyload)"),Array.prototype.forEach.call(i,(function(t){var i=t.getBoundingClientRect(),r=i.top,a=i.bottom;(r>0&&r<e+o||a>0&&a<e+o)&&t_video_lazyload__addVideo(t)}))}function t_video_lazyload__addVideo(e){var t=e.getAttribute("data-videolazy-load"),o=e.getAttribute("data-videolazy-type"),i=e.getAttribute("data-videolazy-id"),r=i?i.trim():"",a=e.getAttribute("data-videolazy-hash"),n=a?a.trim():"",l,d=e.getAttribute("data-blocklazy-id")||"",u="youtubeiframe",c="kinescopeiframe",s=e.getAttribute("data-videolazy-two-id");s&&(u+="_"+s+"_");var v=e.getAttribute("data-videolazy-nocontrols"),y=e.getAttribute("data-videolazy-play"),_=e.getAttribute("data-videolazy-mute"),f=e.getAttribute("data-videolazy-api"),p=e.getAttribute("data-videolazy-inline"),m="",b="100%",h=e.getAttribute("data-videolazy-height");if(h&&-1===h.indexOf("vh")&&(b=h),"false"===t&&!e.classList.contains("t-video__isload"))if(e.setAttribute("data-videolazy-load","true"),"youtube"===o){var w="";-1!==r.indexOf("vd.tilda.cc")?w=r:(m+="rel=0&fmt=18&html5=1&showinfo=0",m+=y?"&autoplay=1":"",m+=_?"&mute=1":"",m+="yes"===v?"&controls=0":"",w="https://www.youtube.com/embed/"+(r=(r+=-1!==r.indexOf("?")?"&":"?").replace("https://www.youtube.com/shorts/",""))+(m+=f?"&enablejsapi=1":""));var g=u+d;e.insertAdjacentHTML("afterbegin",'<iframe id="'+g+'" width="100%" height="'+b+'" src="'+w+'" frameborder="0"'+(y?' allow="autoplay"':"")+" allowfullscreen></iframe>")}else if("vimeo"===o){var z=/(?:https?:\/\/)?(?:www\.)?(?:vimeo\.com\/|player\.vimeo\.com\/video\/|api\.vimeo\.com\/videos\/)?(\d+)/,A=r.match(z);r=A[1]?A[1]:r,m=n?"&h="+n:"",m+=y?"&autoplay=1":"",m+=_?"&muted=1":"",m+=f?"&api=1":"",e.insertAdjacentHTML("afterbegin",'<iframe src="//player.vimeo.com/video/'+r+"?title=0&byline=0&portrait=0&badge=0&color=ffffff"+m+'" width="100%" height="'+b+'" frameborder="0"'+(y?' allow="autoplay"':"")+"webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>")}else if("kinescope"===o){m+=y?"&autoplay=1":"",m+=_?"&muted=1":"",-1===r.indexOf("?")&&(m=m.replace("&","?"));var g=c+d;e.insertAdjacentHTML("afterbegin",'<iframe id="'+g+'" src="https://kinescope.io/embed/'+r+m+'" width="100%" height="'+b+'" frameborder="0" scrolling="no" allow="fullscreen; picture-in-picture; encrypted-media;"></iframe>')}else if("rutube"===o)m+=n?"&p="+n:"",m+=y?"&autoplay=1":"",m=(m+=_?"&muted=1":"").replace("&","?"),e.insertAdjacentHTML("afterbegin",'<iframe src="https://rutube.ru/embed/'+r+m+'" width="100%" height="'+b+'" frameborder="0" scrolling="no" allow="clipboard-write; autoplay; fullscreen; picture-in-picture; encrypted-media;" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>');else if("vkvideo"===o){var P=/(?:video|video_ext\.php\?oid=|clip=?|)(-?\d+)_(\d+)|oid=(-?\d+)&id=(\d+)(?:.*?hash=([a-f0-9]+))?/,T=r.match(P),V="",E="";T&&(V=T[1]||T[3],E=T[2]||T[4],!n&&T[5]&&(n=T[5])),m+=y?"&autoplay=1":"",m+=_?"&muted=1":"",m+=n?"&hash="+n:"",m+=f?"&js_api=1":"",e.insertAdjacentHTML("afterbegin",'<iframe src="https://vk.com/video_ext.php?oid='+V+"&id="+E+"&hd=2"+m+'" width="100%" height="'+b+'" frameborder="0" scrolling="no" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;"></iframe>')}else if("boomstream"===o)m+=y?"&autostart=1":"",m=(m+=_?"&volume=0":"").replace("&","?"),e.insertAdjacentHTML("afterbegin",'<iframe src="'+r+m+'" width="100%" height="'+b+'" frameborder="0" scrolling="no" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;" allowfullscreen></iframe>');else if("mp4"===o){var F='\n\t\t\t\t<video\n\t\t\t\t\twidth="100%"\n\t\t\t\t\theight="'+b+'"\n\t\t\t\t\tcontrols\n\t\t\t\t\t'+(y?"autoplay":"")+"\n\t\t\t\t\t"+(_?"muted":"")+"\n\t\t\t\t\t"+(p?"playsinline":"")+'\n\t\t\t\t>\n\t\t\t\t\t<source src="'+r+'" type="video/mp4">\n\t\t\t\t\tYour browser does not support the video tag.\n\t\t\t\t</video>\n\t\t\t';e.insertAdjacentHTML("afterbegin",F)}else if("webm"===o){var k='\n\t\t\t\t<video\n\t\t\t\t\twidth="100%"\n\t\t\t\t\theight="'+b+'"\n\t\t\t\t\tcontrols\n\t\t\t\t\t'+(y?"autoplay":"")+"\n\t\t\t\t\t"+(_?"muted":"")+"\n\t\t\t\t\t"+(p?"playsinline":"")+'\n\t\t\t\t>\n\t\t\t\t\t<source src="'+r+'" type="video/webm">\n\t\t\t\t\tYour browser does not support the video tag.\n\t\t\t\t</video>\n\t\t\t';e.insertAdjacentHTML("afterbegin",k)}else"iframe"===o&&e.insertAdjacentHTML("afterbegin",'<iframe src="'+r+'" width="100%" height="'+b+'" frameborder="0" scrolling="no" allow="autoplay; encrypted-media; fullscreen; picture-in-picture;"></iframe>');e.closest(".t116")||"540px"!==h||t_video_lazyload__setHeight(e)}function t_video_lazyload__removeVideo(e){e.innerHTML="",e.setAttribute("data-videolazy-load","false")}function t_video_lazyload__setHeight(e){if(e){var t=e.getAttribute("data-videolazy-type"),o=e.querySelector("iframe");"mp4"!==t&&"webm"!==t||(o=e.querySelector("video"));var i=.5625*e.offsetWidth;e.style.height=i+"px",o&&(o.style.height=i+"px")}}function t_video__createPlayer(e,t){if(e.TildaVideoPlayer)return Promise.resolve(e.TildaVideoPlayer);var o=e.querySelector(".t-video-lazyload");t_video_lazyload__overwriteParams(o,t);var i=o.getAttribute("data-videolazy-type");return t_video_lazyload__addVideo(o),"mp4"===i||"webm"===i?t_video__initPlayer__htmlVideo(e,i):"rutube"===i?t_video__initPlayer__rutube(e):"vkvideo"===i?t_video__initPlayer__vkvideo(e):"youtube"===i?t_video__initPlayer__youtube(e):"vimeo"===i?t_video__initPlayer__vimeo(e):"kinescope"===i?t_video__initPlayer__kinescope(e):"boomstream"===i?t_video__initPlayer__boomstream(e):Promise.reject(console.warn("unsupported video type:",i))}function t_video__getPlayer(e){var t;return e.TildaVideoPlayer||null}function t_video__initPlayer__youtube(e){var t="youtube";return new Promise((function(o,i){var r=e.querySelector("iframe");if(!r)return i(new Error(t+": IFrame Element not Found"));t_onFuncLoad("t_loadJsFile",(function(){t_loadJsFile("https://www.youtube.com/iframe_api")})),t_onFuncLoad("YT",(function(){var i=r.id;if(!YT.Player)return setTimeout((function(){t_video__initPlayer__youtube(e).then(o)}),300);new YT.Player(i,{events:{onReady:function i(a){var n=a.target,l={videoType:t,pause:function e(){return n.pauseVideo()},play:function e(){return n.playVideo()},videoEl:r,player:n};return e.TildaVideoPlayer=l,o(l)}}})}))}))}function t_video__initPlayer__vimeo(e){var t="vimeo";function o(e,t){e.contentWindow.postMessage(JSON.stringify({method:t,value:"true"}),"*")}return new Promise((function(i,r){var a=e.querySelector("iframe");if(!a)return r(new Error(t+": IFrame Element not Found"));var n={pause:function e(){return o(a,"pause")},play:function e(){return o(a,"play")},videoEl:a,videoType:t};e.TildaVideoPlayer=n,i(n)}))}function t_video__initPlayer__kinescope(e){var t="kinescope";return new Promise((function(o,i){var r=e.querySelector("iframe");if(!r)return i(new Error(t+": IFrame Element not Found"));t_onFuncLoad("t_loadJsFile",(function(){t_loadJsFile("https://player.kinescope.io/latest/iframe.player.js")})),t_onFuncLoad("Kinescope",(function(){var i=r.id,a=r.src;Kinescope.IframePlayer.create(i,{url:a}).then((function(i){var a={pause:function e(){return i.pause()},play:function e(){return i.play()},player:i,videoEl:r,videoType:t};e.TildaVideoPlayer=a,o(a)}))}))}))}function t_video__initPlayer__vkvideo(e){var t="vkvideo";return new Promise((function(o,i){var r=e.querySelector("iframe");if(!r)return i(new Error(t+": IFrame Element not Found"));t_onFuncLoad("t_loadJsFile",(function(){t_loadJsFile("https://vk.com/js/api/videoplayer.js")})),t_onFuncLoad("VK",(function(){var i=VK.VideoPlayer(r),a={videoType:t,pause:function e(){return i.pause()},play:function e(){return i.play()},videoEl:r,player:i};return e.TildaVideoPlayer=a,o(a)}))}))}function t_video__initPlayer__rutube(e){var t="rutube";function o(e,t){e.contentWindow.postMessage(JSON.stringify({type:"player:"+t,data:{}}),"*")}return new Promise((function(i,r){var a=e.querySelector("iframe");if(!a)return r(new Error(t+": IFrame Element not Found"));var n={videoType:t,pause:function e(){return o(a,"pause")},play:function e(){return o(a,"play")},videoEl:a};return e.TildaVideoPlayer=n,i(n)}))}function t_video__initPlayer__htmlVideo(e,t){return new Promise((function(o,i){var r=e.querySelector("video");if(!r)return i(new Error(t+": Video Element not Found"));var a={videoType:t,pause:function e(){return r.pause()},play:function e(){return r.play()},videoEl:r};return e.TildaVideoPlayer=a,o(a)}))}function t_video__initPlayer__boomstream(e){var t="boomstream";function o(e,t,o){e.contentWindow.postMessage({code:o,method:"action",action:t,data:""},"*")}return new Promise((function(i,r){var a=e.querySelector("iframe");if(!a)return r(new Error(t+": IFrame Element not Found"));var n,l=/boomstream.com\/(?:balancer\/)?([A-Za-z0-9-]+)/,d=a.src.match(l);if(!d)return r(new Error(t+": VideoID not Found"));var u={pause:function e(){return o(a,"pause",d[1])},play:function e(){return o(a,"play",d[1])},videoEl:a,videoType:t};return e.TildaVideoPlayer=u,i(u)}))}function t_video_lazyload__overwriteParams(e,t){var o=t||{},i=o.videoId,r=o.videoHash,a=o.videoType,n=o.videoBlockId,l=o.controls,d=o.playsinline,u=o.autoplay,c=void 0!==u&&u,s=o.mute,v=void 0!==s&&s,y=o.jsApi,_=void 0===y||y;return a&&e.setAttribute("data-videolazy-type",a),i&&e.setAttribute("data-videolazy-id",i),r&&e.setAttribute("data-videolazy-hash",r),n&&e.setAttribute("data-blocklazy-id",n),c&&e.setAttribute("data-videolazy-play","true"),v&&e.setAttribute("data-videolazy-mute","true"),!0===l&&e.setAttribute("data-videolazy-nocontrols","false"),!1===l&&e.setAttribute("data-videolazy-nocontrols","yes"),_&&e.setAttribute("data-videolazy-api","true"),d&&e.setAttribute("data-videolazy-inline","true"),e}t_onReady((function(){t_onFuncLoad("t_video_lazyload_init",(function(){var e;document.querySelectorAll(".t-video-lazyload:not(.t-video-no-lazyload)").length&&t_video_lazyload_init()}))}));
